"use strict";(self.webpackChunkframeio_api=self.webpackChunkframeio_api||[]).push([[7675],{38169:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return u}});var a=n(87462),i=n(63366),r=(n(15007),n(64983)),o=n(91515),d=["components"],l={},m={_frontmatter:l},s=o.Z;function u(e){var t=e.components,n=(0,i.Z)(e,d);return(0,r.mdx)(s,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h2",{id:"configuring-custom-actions"},"Configuring Custom Actions"),(0,r.mdx)("p",null,"Actions can be created and managed via ",(0,r.mdx)("a",{parentName:"p",href:"/frameio-api/frameio/api/experimental/#tag/Custom-Actions"},"the Frame.io V4 Developer API"),", or through the new ",(0,r.mdx)("a",{parentName:"p",href:"https://next.frame.io/settings/actions"},"Actions settings (Beta)")," available in Frame.io V4 on Web. Only Content Admins and Account Owners can Create, Edit, Delete or Update custom Actions."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Name"),(0,r.mdx)("td",{parentName:"tr",align:null},"The name you choose for your Action. It will be displayed in the Frame.io UI in places like the context menu and form-field modals")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Description"),(0,r.mdx)("td",{parentName:"tr",align:null},"Explains what the Action does. It will be displayed under the Action's name in the Frame.io UI")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Event"),(0,r.mdx)("td",{parentName:"tr",align:null},"An internal Event key to help you differentiate between Frame.io system Events and your own")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"URL"),(0,r.mdx)("td",{parentName:"tr",align:null},"Where to deliver Events, either your own self-hosted application or an IPaSS tool")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Workspace"),(0,r.mdx)("td",{parentName:"tr",align:null},"The Workspace your Action will be made available in")))),(0,r.mdx)("h2",{id:"receive-an-action-payload-from-frameio"},"Receive an Action Payload From Frame.io"),(0,r.mdx)("p",null,"When your Action is executed, a payload is sent to the URL set in the Action's configuration. Use this payload to identify:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Which Action was executed"),(0,r.mdx)("li",{parentName:"ul"},"Which Account is associated with the Action"),(0,r.mdx)("li",{parentName:"ul"},"Which Project contains the asset the Action was executed on"),(0,r.mdx)("li",{parentName:"ul"},"Which Resource the Action was executed on and its type"),(0,r.mdx)("li",{parentName:"ul"},"Which Event was executed"),(0,r.mdx)("li",{parentName:"ul"},"Which User executed the Action"),(0,r.mdx)("li",{parentName:"ul"},"Which Workspace is associated with the Action")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'POST /your/url\n{\n    "account_id": "9a44f696-ae69-4e0c-9731-806d27ea46f1",\n    "action_id": "ecd40785-4485-4f07-9d26-a006ea84efdf",\n    "interaction_id": "e0a1c945-a8da-480d-92fb-e895cb640a01",\n    "project":\n    {\n        "id": "3dda6833-ec3b-46bd-a7d9-1a77c03a165b"\n    },\n    "resource":\n    {\n        "id": "f9d5728c-ac1a-4f48-92bb-ea2f9be3c58b",\n        "type": "file"\n    },\n    "type": "two.event",\n    "user":\n    {\n        "id": "50d976e6-27d2-47cb-9388-45b38d55f4f0"\n    },\n    "workspace":\n    {\n        "id": "382a1fe6-67cf-481e-9b65-79cfd9e9727f"\n    }\n}\n')),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"account_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique Account identifier this Action belongs to. It is always the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"action_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique identifier of the Action itself. It is always the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"interaction_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"Unique identifier generated by Frame.io representing each time an Action is executed.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"project_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"Unique identifier of the Project containing the asset this Action was triggered on.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"resource.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The id of the resource your Action was executed on (usually an asset).")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"resource.type")),(0,r.mdx)("td",{parentName:"tr",align:null},"The type of resource your Action was executed on. Possible values include ",(0,r.mdx)("inlineCode",{parentName:"td"},"file"),",",(0,r.mdx)("inlineCode",{parentName:"td"},"folder")," or ",(0,r.mdx)("inlineCode",{parentName:"td"},"version_stack"),".")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"type")),(0,r.mdx)("td",{parentName:"tr",align:null},"The internal Event key defined when configuring your Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"user.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique identifier of the User who executed the Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"workspace.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique identifier of the Workspace the Action belongs to. It is always the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"data")),(0,r.mdx)("td",{parentName:"tr",align:null},"Object containing key-value pairs denoting the name of each form element and the value selected.")))),(0,r.mdx)("h2",{id:"interactions-retries-and-timeouts"},"Interactions, Retries and Timeouts"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"interaction_id")," is a unique identifier to track an Action's execution as it evolves over time. The ID persists throughout any sequence of an Action, including callback forms. If a response to the user is not required, simply return a 200 status code and the interaction is done. We recommend including information about the result of the interaction, such as a success or error message."),(0,r.mdx)("p",null,"Actions support message callbacks. Frame.io expects a response in under 5 seconds and attempts to retry up to 5 times while waiting for a response. Ideally the response is immediate and asynchronous operations occur after an Action is executed."),(0,r.mdx)("h2",{id:"create-a-message-callback"},"Create a Message Callback"),(0,r.mdx)("p",null,"In your HTTP response to the webhook event, you can return a JSON object describing a message that will be returned to the initiating user in the Frame.io UI."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Success!",\n  "description": "The thing worked! Nice."\n}\n')),(0,r.mdx)("p",null,"Messages close an Action's interaction loop providing variable context to the User without asking them to switch contexts. If the initial payload, and any subsequent calls to the Frame.io API, don't provide enough context for the receiving application to complete the Action, use ",(0,r.mdx)("strong",{parentName:"p"},"Form Callbacks"),"."),(0,r.mdx)("h2",{id:"create-a-form-callback"},"Create a Form Callback"),(0,r.mdx)("p",null,"When your use case requires more information from the User before you start your process, Actions enable you to render form field modals in the Frame.io UI."),(0,r.mdx)("p",null,"For example, you may want to create an Action to orchestrate the upload of a file from Frame.io into another system but it requires the User to provide additional details and settings before it can be completed. You can describe a form in your inital response which will be presented to the User in Frame.io to fill out. Once submitted, the form values are included in a subsequent payload back to the URL defined in your Action's configuration."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Need some more info!",\n  "description": "Getting ready to submit this file!",\n  "fields": [\n    {\n      "type": "text",\n      "label": "Title",\n      "name": "title",\n      "value": "MyVideo.mp4"\n    },\n    {\n      "type": "select",\n      "label": "Captions",\n      "name": "captions",\n      "options": [\n        {\n          "name": "Off",\n          "value": "off"\n        },\n        {\n          "name": "On",\n          "value": "on"\n        }\n      ]\n    }\n  ]\n}\n')),(0,r.mdx)("p",null,"When the user submits the form, you'll receive an event on the same URL as the initial POST:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'POST /your/url\n{\n  "type": "your-specified-event-name",\n  "interaction_id": "the-same-id-as-before",\n  "action_id": "unique-id-for-this-custom-action",\n  "data":{\n    "title": "MyVideo.mp4",\n    "captions": "off"\n  }\n}\n')),(0,r.mdx)("p",null,"All fields added on a form appear in the data section of the JSON payload sent by Frame.io. Use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"interaction_id")," to map the initial request and this new form data. And again, you can respond with a message (or even another form!) By chaining Actions, Forms, and Messages, you can effectively program entire Asset workflows in Frame.io with business logic from an external system."),(0,r.mdx)("h2",{id:"form-details"},"Form Details"),(0,r.mdx)("p",null,"Like Messages, Forms support ",(0,r.mdx)("inlineCode",{parentName:"p"},"title")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"description")," attributes that render at the top of the Form. Beyond that, each form field accepts the following base attributes:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"type -- Tells Frame.io which type of data to expect, and which component to render in the UI"),(0,r.mdx)("li",{parentName:"ul"},"label -- Appears in the UI as descriptor for your field"),(0,r.mdx)("li",{parentName:"ul"},"name -- Key by which the field will be identified on the subsequent payload"),(0,r.mdx)("li",{parentName:"ul"},"value -- Value with which to pre-populate the field")),(0,r.mdx)("h2",{id:"supported-field-types"},"Supported Field Types"),(0,r.mdx)("h3",{id:"text-field"},"Text Field"),(0,r.mdx)("p",null,"A simple text field with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{  \n  "type": "text",\n  "label": "Title",\n  "name": "title",\n  "value": "MyVideo.mp4"\n}\n')),(0,r.mdx)("h3",{id:"text-area"},"Text Area"),(0,r.mdx)("p",null,"A simple text area with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{  \n  "type": "textarea",\n  "label": "Description",\n  "name": "description",\n  "value": "This video is really, really popular."\n}\n')),(0,r.mdx)("h3",{id:"select-list"},"Select List"),(0,r.mdx)("p",null,"Defines a picklist that the user can choose from. Must include an ",(0,r.mdx)("inlineCode",{parentName:"p"},"options")," list, each member of which should include a human-readable ",(0,r.mdx)("inlineCode",{parentName:"p"},"name"),", and a machine-parseable ",(0,r.mdx)("inlineCode",{parentName:"p"},"value"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "select",\n  "label": "Captions",\n  "name": "captions",\n  "value": "off",\n  "options": [\n       {\n         "name": "Off",\n         "value": "off"\n       },\n       {\n         "name": "On",\n         "value": "on"\n      }\n   ]\n}\n')),(0,r.mdx)("h3",{id:"checkbox"},"Checkbox"),(0,r.mdx)("p",null,"A simple checkbox with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{ \n   "type": "boolean", \n   "name": "enabled", \n   "label": "Enabled", \n   "value": "false"\n}\n')),(0,r.mdx)("h3",{id:"link"},"Link"),(0,r.mdx)("p",null,"A simple link with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'  {\n    "type": "link",\n    "name": "videoLink",\n    "label": "Video Link",\n    "value": "https://www.youtube.com/watch?v=XtX1zv9CEVc"\n }\n')),(0,r.mdx)("h2",{id:"custom-actions-permissions"},"Custom Actions Permissions"),(0,r.mdx)("p",null,"Custom Actions have a special permissions model: they belong to a Workspace, not to any specific user who exists on an Account. That means:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Any Content Admin can create a custom Action in a Workspace"),(0,r.mdx)("li",{parentName:"ul"},"Any Member with permission to the Workspace the Action is in can execute that Action"),(0,r.mdx)("li",{parentName:"ul"},"Any Content Admin can modify or delete a custom Action in a Workspace. Once modified, all users with permissions to that Workspace will immediately see the change"),(0,r.mdx)("li",{parentName:"ul"},"Any subsequent Frame.io API requests performed as a result of the Action's execution will respect the permissions of the token used to make those requests")),(0,r.mdx)("h2",{id:"security-and-verification"},"Security and Verification"),(0,r.mdx)("p",null,"By default, all Actions have a signing key generated when created. This is not configurable. This key can be used to verify that the request originates from Frame.io. Included in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"POST")," request are the following:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"X-Frameio-Request-Timestamp")),(0,r.mdx)("td",{parentName:"tr",align:null},"The time your Custom Action was triggered.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"X-Frameio-Signature")),(0,r.mdx)("td",{parentName:"tr",align:null},"The computed signature.")))),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"The timestamp")," is the time the request was signed on its way out of Frame.io's network. This can be used to prevent replay attacks. We recommended verifying this time is within 5 minutes of local time."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"The signature")," is a HMAC SHA-256 hash using the signing key provided when the Custom Action is first created.")),(0,r.mdx)("h3",{id:"verifying-the-signature"},"Verifying the Signature"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Extract the signature from the HTTP headers."),(0,r.mdx)("li",{parentName:"ol"},"Create a message to sign by combining the version, delivery time, and request body ",(0,r.mdx)("inlineCode",{parentName:"li"},"v0:timestamp:body"),"."),(0,r.mdx)("li",{parentName:"ol"},"Compute the HMAC SHA256 signature using your signing secret.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Note"),": The provided signature is prefixed with ",(0,r.mdx)("inlineCode",{parentName:"p"},"v0="),". Currently Frame.io only has this one version for signing requests. You will need to add this prefix to your computed signature."),(0,r.mdx)("p",null,"Compare!"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-python"},"import hmac\nimport hashlib\n**def** verify_signature(curr_time, req_time, signature, body, secret):\n    \"\"\"\n    Verify webhook/custom action signature\n    :Args:\n        curr_time (float): Current epoch time\n        req_time (float): Request epoch time\n        signature (str): Signature provided by the frame.io API for the given request\n        body (str): Custom Action body from the received POST\n        secret (str): The secret for this Custom Action that you saved when you first created it\n    \"\"\"\n    if int(curr_time) - int(req_time) < 500:\n        message = 'v0:{}:{}'.format(req_time, body)\n        calculated_signature = 'v0={}'.format(hmac.new(\n            bytes(secret, 'latin-1'),\n            msg=bytes(message, 'latin-1'),\n            digestmod=hashlib.sha256).hexdigest())\n        if calculated_signature == signature:\n            return True\n    return False\n")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-custom-actions-configuring-actions-index-md-e668f36e8a60a2a9585b.js.map