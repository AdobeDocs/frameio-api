"use strict";(self.webpackChunkframeio_api=self.webpackChunkframeio_api||[]).push([[544],{63762:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return u}});var a=n(87462),i=n(63366),r=(n(15007),n(64983)),o=n(91515),d=["components"],m={},l={_frontmatter:m},s=o.Z;function u(e){var t=e.components,n=(0,i.Z)(e,d);return(0,r.mdx)(s,(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"custom-actions"},"Custom Actions"),(0,r.mdx)("p",null,"Use the Custom Actions beta to build integrations directly into ",(0,r.mdx)("a",{parentName:"p",href:"https://next.frame.io/"},"Frame.io")," as programmable UI components. This enables workflows that can be triggered by users within the app, leveraging the same underlying events routing as webhooks. You can create user-triggered single or multi-step forms that come back to Frame.io as another form or a basic response. And when a user clicks a Custom Action on an Asset, Frame.io sends a payload to a URL you provide. The receiving application responds with an HTTP status code to acknowledge receipt, or responds with a custom callback that can render additional UI in Frame.io."),(0,r.mdx)("p",null,"Configure ",(0,r.mdx)("a",{parentName:"p",href:"https://developer-stage.adobe.com/frameio/api/alpha/#tag/Custom-Actions"},"Custom Actions")," in the Experimental API."),(0,r.mdx)("br",null),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Name"),(0,r.mdx)("td",{parentName:"tr",align:null},"The name you choose for your custom action. It will be shown in the menu of available custom actions in Frame.io.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Description"),(0,r.mdx)("td",{parentName:"tr",align:null},"Explain what the action does, for reference (the description won't appear in the Frame.io web app).")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Event"),(0,r.mdx)("td",{parentName:"tr",align:null},"Internal event key to help you differentiate between standard webhook events and your own.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"URL"),(0,r.mdx)("td",{parentName:"tr",align:null},"Where to deliver events.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Workspace"),(0,r.mdx)("td",{parentName:"tr",align:null},"The Workspace that will use the custom action.")))),(0,r.mdx)("h2",{id:"configure-your-custom-action"},"Configure Your Custom Action"),(0,r.mdx)("p",null,"When a user selects a Custom Action on an Asset, Frame.io sends a payload to a URL you provide. The receiving application can respond with an HTTP status code to acknowledge receipt, or respond with a custom callback that renders additional UI in ",(0,r.mdx)("a",{parentName:"p",href:"https://next.frame.io/"},"Frame.io"),"."),(0,r.mdx)("p",null,"Content Admin permissions are required to create Custom Actions for a Workspace. Ask your admin to modify your permissions if you don't have access."),(0,r.mdx)("h2",{id:"payload-from-frameio"},"Payload From Frame.io"),(0,r.mdx)("p",null,"When the user clicks your Custom Action, a payload is sent to the URL you set in the URL field. Use this payload to identify:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Which Custom Action was clicked"),(0,r.mdx)("li",{parentName:"ul"},"Which resource was clicked"),(0,r.mdx)("li",{parentName:"ul"},"Which user took the action"),(0,r.mdx)("li",{parentName:"ul"},"Which account is associated with the Custom Action"),(0,r.mdx)("li",{parentName:"ul"},"Which event type was triggered"),(0,r.mdx)("li",{parentName:"ul"},"Which Workspace is associated with the Custom Action"),(0,r.mdx)("li",{parentName:"ul"},"Which Project contains the resource on which the Custom action was triggered")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'POST /your/url\n{\n    "account_id": "9a44f696-ae69-4e0c-9731-806d27ea46f1",\n    "action_id": "ecd40785-4485-4f07-9d26-a006ea84efdf",\n    "interaction_id": "e0a1c945-a8da-480d-92fb-e895cb640a01",\n    "project":\n    {\n        "id": "3dda6833-ec3b-46bd-a7d9-1a77c03a165b"\n    },\n    "resource":\n    {\n        "id": "f9d5728c-ac1a-4f48-92bb-ea2f9be3c58b",\n        "type": "file"\n    },\n    "type": "two.event",\n    "user":\n    {\n        "id": "50d976e6-27d2-47cb-9388-45b38d55f4f0"\n    },\n    "workspace":\n    {\n        "id": "382a1fe6-67cf-481e-9b65-79cfd9e9727f"\n    }\n}\n')),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"account_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique account of this Action. It is always be the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"action_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique id of this Action. It is always be the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"interaction_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"This is a unique identifier generated by Frame.io that you can use to keep track of your transaction. This identifier is the same throughout any sequence of an Action, including callback forms.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"project_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique project of this Action. It is always be the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"resource.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The id of the resource from which you triggered your Action (usually an Asset).")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"resource.type")),(0,r.mdx)("td",{parentName:"tr",align:null},"The type of resource from which you triggered your Action (usually ",(0,r.mdx)("strong",{parentName:"td"},"asset"),") It can be ",(0,r.mdx)("inlineCode",{parentName:"td"},"file"),",",(0,r.mdx)("inlineCode",{parentName:"td"},"folder")," or ",(0,r.mdx)("inlineCode",{parentName:"td"},"version_stack"),".")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"type")),(0,r.mdx)("td",{parentName:"tr",align:null},"The name of the event you put in the Event field when configuring your Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"user.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique ID to identify the user who triggered the action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"workspace.id")),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique Workspace of this Action. It is always be the same for a given Action.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"data")),(0,r.mdx)("td",{parentName:"tr",align:null},"An object of key-value pairs denoting the name of a form element and the value selected and is what the user defines to inform the client url app of a choice being made.")))),(0,r.mdx)("h2",{id:"interactions-retries-and-timeouts"},"Interactions, Retries and Timeouts"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"interaction_id")," is a unique identifier to track of the interaction as it evolves over time. If you do not need to respond to the user, return a 200 status code, and you're done. While optional, we recommend including information about the result of the action, like a success message or error alert. Custom actions support message callbacks.Frame.io expects a response in less than 10 seconds, and attempts to retry up to 5 times while waiting for a successful response. Ideally the response is immediate and asynchronous actions occur after a trigger via a Custom Action."),(0,r.mdx)("h2",{id:"create-a-message-callback"},"Create a Message Callback"),(0,r.mdx)("p",null,"In your HTTP response to the webhook event, you can return a JSON object describing a message that will be returned to the initiating user in the Frame.io UI."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Success!",\n  "description": "The thing worked! Nice."\n}\n')),(0,r.mdx)("p",null,"Messages close the action loop providing variable context to the user, without asking them to switch contexts. When the initial payload and subsequent calls to the Frame.io API don't provide enough context for the receiving application, use ",(0,r.mdx)("strong",{parentName:"p"},"Form Callbacks"),"."),(0,r.mdx)("h2",{id:"create-a-form-callback"},"Create a Form Callback"),(0,r.mdx)("p",null,"Let's say that you need more info before you start your process. For example, you may be uploading content to a system that requires additional details and settings. You can describe a Form in your response, which the user sees snd fills out, and is then sent right back to you! Here's an example form that renders a Form in the Frame.io UI that the acting user can fill out and submit:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Need some more info!",\n  "description": "Getting ready to submit this file!",\n  "fields": [\n    {\n      "type": "text",\n      "label": "Title",\n      "name": "title",\n      "value": "MyVideo.mp4"\n    },\n    {\n      "type": "select",\n      "label": "Captions",\n      "name": "captions",\n      "options": [\n        {\n          "name": "Off",\n          "value": "off"\n        },\n        {\n          "name": "On",\n          "value": "on"\n        }\n      ]\n    }\n  ]\n}\n')),(0,r.mdx)("p",null,"When the user submits the form, you'll receive an event on the same URL as the initial POST:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'POST /your/url\n{\n  "type": "your-specified-event-name",\n  "interaction_id": "the-same-id-as-before",\n  "action_id": "unique-id-for-this-custom-action",\n  "data":{\n    "title": "MyVideo.mp4",\n    "captions": "off"\n  }\n}\n')),(0,r.mdx)("p",null,"All custom fields added on a form appear in the data section of the JSON payload sent by Frame.io. Use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"interaction_id")," to map the initial request and this new form data. And again, you can respond with a message (or even another form!). By chaining Actions, Forms, and Messages, you can effectively program entire Asset workflows in Frame.io with business logic from an external system."),(0,r.mdx)("h2",{id:"form-details"},"Form Details"),(0,r.mdx)("p",null,"Like messages, Forms support ",(0,r.mdx)("inlineCode",{parentName:"p"},"title")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"description")," attributes that render at the top of the Form. Beyond that, each form field accepts the following base attributes:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"type -- Tells the Frame.io UI which type of data to expect, and which component and render."),(0,r.mdx)("li",{parentName:"ul"},"label -- Appears on the UI as the header above the field."),(0,r.mdx)("li",{parentName:"ul"},"name -- Key by which the field will be identified on the subsequent payload."),(0,r.mdx)("li",{parentName:"ul"},"value -- Value with which to pre-populate the field.")),(0,r.mdx)("h2",{id:"supported-field-types"},"Supported Field Types"),(0,r.mdx)("h3",{id:"text-field"},"Text Field"),(0,r.mdx)("p",null,"A simple text field with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{  \n  "type": "text",\n  "label": "Title",\n  "name": "title",\n  "value": "MyVideo.mp4"\n}\n')),(0,r.mdx)("h3",{id:"text-area"},"Text Area"),(0,r.mdx)("p",null,"A simple text area with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{  \n  "type": "textarea",\n  "label": "Description",\n  "name": "description",\n  "value": "This video is really, really popular."\n}\n')),(0,r.mdx)("h3",{id:"select-list"},"Select List"),(0,r.mdx)("p",null,"Defines a picklist that the user can choose from. Must include an ",(0,r.mdx)("inlineCode",{parentName:"p"},"options")," list, each member of which should include a human-readable ",(0,r.mdx)("inlineCode",{parentName:"p"},"name"),", and a machine-parseable ",(0,r.mdx)("inlineCode",{parentName:"p"},"value"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "select",\n  "label": "Captions",\n  "name": "captions",\n  "value": "off",\n  "options": [\n       {\n         "name": "Off",\n         "value": "off"\n       },\n       {\n         "name": "On",\n         "value": "on"\n      }\n   ]\n}\n')),(0,r.mdx)("h3",{id:"checkbox"},"Checkbox"),(0,r.mdx)("p",null,"A simple checkbox with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{ \n   "type": "boolean", \n   "name": "enabled", \n   "label": "Enabled", \n   "value": "false"\n}\n')),(0,r.mdx)("h3",{id:"link"},"Link"),(0,r.mdx)("p",null,"A simple link with no additional parameters."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'  {\n    "type": "link",\n    "name": "videoLink",\n    "label": "Video Link",\n    "value": "https://www.youtube.com/watch?v=XtX1zv9CEVc"\n }\n')),(0,r.mdx)("h2",{id:"the-frameio-permissions-model"},"The Frame.io Permissions Model"),(0,r.mdx)("p",null,"Custom Actions have a special permissions model: they belong to a Workspace, not to any specific user who exists on an Account. That means:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Any Content Admin can create a Custom Action on a Workspace."),(0,r.mdx)("li",{parentName:"ul"},"Any Content Admin can modify or delete a Custom Action that exists on a Team.  Once modified, all users will immediately see the result of the change.")),(0,r.mdx)("h2",{id:"security-and-verification"},"Security and Verification"),(0,r.mdx)("p",null,"By default, all Custom Actions have a signing key generated during their creation. This is not configurable. This key can be used to verify that the request originates from Frame.io. Included in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"POST")," request are the following:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"X-Frameio-Request-Timestamp")),(0,r.mdx)("td",{parentName:"tr",align:null},"The time your Custom Action was triggered.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"X-Frameio-Signature")),(0,r.mdx)("td",{parentName:"tr",align:null},"The computed signature.")))),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"The timestamp")," is the time the request was signed on its way out of Frame.io's network. This can be used to prevent replay attacks. We recommended verifying this time is within 5 minutes of local time."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"The signature")," is a HMAC SHA-256 hash using the signing key provided when the Custom Action is first created.")),(0,r.mdx)("h3",{id:"verifying-the-signature"},"Verifying the Signature"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Extract the signature from the HTTP headers."),(0,r.mdx)("li",{parentName:"ol"},"Create a message to sign by combining the version, delivery time, and request body ",(0,r.mdx)("inlineCode",{parentName:"li"},"v0:timestamp:body"),"."),(0,r.mdx)("li",{parentName:"ol"},"Compute the HMAC SHA256 signature using your signing secret.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Note"),": The provided signature is prefixed with ",(0,r.mdx)("inlineCode",{parentName:"p"},"v0="),". Currently Frame.io only has this one version for signing requests. You will need to add this prefix to your computed signature."),(0,r.mdx)("p",null,"Compare!"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-python"},"import hmac\nimport hashlib\n**def** verify_signature(curr_time, req_time, signature, body, secret):\n    \"\"\"\n    Verify webhook/custom action signature\n    :Args:\n        curr_time (float): Current epoch time\n        req_time (float): Request epoch time\n        signature (str): Signature provided by the frame.io API for the given request\n        body (str): Custom Action body from the received POST\n        secret (str): The secret for this Custom Action that you saved when you first created it\n    \"\"\"\n    if int(curr_time) - int(req_time) < 500:\n        message = 'v0:{}:{}'.format(req_time, body)\n        calculated_signature = 'v0={}'.format(hmac.new(\n            bytes(secret, 'latin-1'),\n            msg=bytes(message, 'latin-1'),\n            digestmod=hashlib.sha256).hexdigest())\n        if calculated_signature == signature:\n            return True\n    return False\n")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-custom-actions-index-md-a0874901e2067fb15d80.js.map